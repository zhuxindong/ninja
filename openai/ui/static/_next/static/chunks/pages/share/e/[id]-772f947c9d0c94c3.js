(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2992],{67217:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/share/e/[id]",function(){return t(23694)}])},23694:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return E},default:function(){return N}});var r=t(21722),a=t(39324),i=t(71209),s=t(22830),o=t(38104),u=t(35250),c=t(59119),l=t(1821),f=t(88798),d=t(95137),h=t(37469),p=t(5268),_=t(13995);t(68993);var v=t(44675),y="".concat(v.env.INTERNAL_API_URL,"/api");function g(){return(g=(0,r._)(function(n){var e,t,r,a,i,s,u,c,l,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e=n.ids,t=[],r=!0,a=!1,i=void 0;try{for(s=e[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)c=u.value,t.push(["ids",c])}catch(n){a=!0,i=n}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return l=new URLSearchParams(t),[4,fetch("".concat(y,"/public/plugins/by-id?").concat(l),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:if(200===(f=o.sent()).status)return[2,f.json()];throw Error("Failed to get plugins by id: "+f.status)}})})).apply(this,arguments)}var w=t(70079),b=t(70671),m=t(94968),E=!0;function N(n){var e=n.sharedConversationId,t=(0,p.a)(["shared-conversation/".concat(e)],function(){return d.ZP.getAuthedSharedConversation(e)}),v=t.data,y=t.isError,m=(0,s._)((0,w.useState)(function(){return(0,h.OX)()}),1)[0],E=(0,s._)((0,w.useState)(!1),2),N=E[0],P=E[1],S=(0,_.NL)(),C=(0,b.Z)();return(0,w.useEffect)(function(){y&&(f.m.danger(C.formatMessage(T.unableToFindConversation),{duration:5}),window.location.href="/")},[y,C]),(0,w.useEffect)(function(){function n(){return(n=(0,r._)(function(){var n,t,r;return(0,o.Jh)(this,function(a){switch(a.label){case 0:if(!(v&&m))return[3,3];if(!((t=null!==(n=v.plugin_ids)&&void 0!==n?n:[]).length>0))return[3,2];return[4,function(n){return g.apply(this,arguments)}({ids:t})];case 1:r=a.sent(),S.setQueryData(r.items.map(function(n){return n.id}),r),a.label=2;case 2:h.tQ.initThreadFromServerData(m,v,!0,e),P(!0),a.label=3;case 3:return[2]}})})).apply(this,arguments)}!function(){n.apply(this,arguments)}()},[v,e,m,S]),N?(0,u.jsx)(c.ZP,(0,i._)((0,a._)({},n.chatPageProps),{clientThreadId:m})):(0,u.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,u.jsx)(l.Z,{className:"text-gray-400 dark:text-gray-500"})})}var T=(0,m.vU)({unableToFindConversation:{id:"workspaceSharePage.unableToFindConversation",defaultMessage:"Unable to find shared conversation",description:"Toast message for error when loading shared conversaion"}})}},function(n){n.O(0,[6786,3656,5960,2104,1438,7985,4137,9441,2277,8937,5342,5408,8873,9119,9774,2888,179],function(){return n(n.s=67217)}),_N_E=n.O()}]);